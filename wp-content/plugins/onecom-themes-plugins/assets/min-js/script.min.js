!function(u){function n(e){var t,a=(a=jQuery(e.target).attr("data-filter-key"))||u("#oc_theme_filter").find(".oc-active-filter").attr("data-filter-key"),o=u(".pagination-item.current").attr("data-request_page"),n=u(".theme-browser").attr("data-item_count"),i=null,r=Math.ceil(u("#theme-browser-page-1 ."+a).length/n);"oc_theme_filter"===u(e.target).parent().attr("id")&&(o=1,t=r,u(".theme-browser-pagination .current").removeClass("current"),u(".theme-browser-pagination .first").addClass("current"),u(".theme-browser-pagination a").hide(),1<t&&u(".theme-browser-pagination a").slice(0,t).show(),u(".oc-active-filter").removeClass("oc-active-filter"),u(e.target).addClass("oc-active-filter")),d(u(".all")),"all"!==a?(d(jQuery(".one-theme").not(jQuery("."+a))),i=1<r?(t=(o-1)*n,e=o*n,u("."+a).slice(t,e)):u("."+a),s(jQuery(i))):s(u(".page-"+o))}function s(e){u(e).removeClass("hidden_theme"),u(".theme-browser-page").hide(),u(".theme-browser-page-filtered").show().append(u(e).clone())}function d(e){u(".theme-browser-page-filtered").find(e).remove()}function t(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var o=t[a].split("=");if(o[0]==e)return o[1]}return!1}function i(e){e&&1==e?u(".inline_badge").show():u(".inline_badge").hide()}function r(e,t,a){var o,n="",e=u("#theme-browser-page-1").find(u('[data-index="'+e+'"]')),n=u(e).find(u(".theme-action")).find("[data-theme_slug]").data("theme_slug");"0"==(isPremiumInt=u(e).data("is-premium")||"0")?o="false":"1"==isPremiumInt&&(o="true"),n&&(themeName=n.trim()),oc_trigger_log({actionType:"wppremium_preview_theme",isPremium:o,theme:n,referrer:a})}if(u(document).ready(function(){screenshotPreview(),0<u(".onecom-move-up").length&&u(".onecom-move-up").click(function(){return u("html, body").animate({scrollTop:0},"slow"),!1});let e=new IntersectionObserver(function(e){!0===e[0].isIntersecting?u(".h-parent-wrap").addClass("oct-hide-after"):u(".h-parent-wrap").removeClass("oct-hide-after")},{threshold:[0]});u("#oc_theme_filter li:last-child span").length&&e.observe(document.querySelector("#oc_theme_filter li:last-child span")),u(document).on("click",".one-install, .one-installed",function(){u(".loading-overlay.fullscreen-loader").addClass("show");var c=u(this),m=1==u(this).parents(".one-theme.theme").first().attr("data-is-premium")?"ptheme":"stheme",h=location.search;oc_validate_action(m).then(function(e){var t,a,o,n,i,r,s,d,l;if("ptheme"==m&&(t="true"),"stheme"==m&&(t="false"),"onecom_install_theme"===c.data("name")&&(a="install",o="wppremium_install_theme"),"onecom_activate_theme"===c.data("name")&&(a="activate",o="wppremium_activate_theme"),"success"===e.status)return i=u(n=c),r=u(n).parents(".one-theme:first"),u(r).addClass("active"),s=u(n).attr("data-name"),d=u(n).attr("data-theme_slug"),n=u(n).attr("data-redirect"),l=onecom_vars.network,void 0!==s&&""!=s&&(s={action:s,theme_slug:d,redirect:n,network:l=void 0===l?!1:l},u(r).addClass("active"),u.post(ajaxurl,s,function(e){var t,e=u.parseJSON(e);void 0!==e.type&&"redirect"==e.type?window.location=e.url:(u(".onecom-notifier").html(e.message).attr("type",e.type).addClass("show"),t=5e3,"success"==e.type&&(u(r).addClass("installed"),u(i).removeClass("one-install").addClass("one-installed"),u(i).find(".action-text").remove(),u(i).find("> span").append(e.button_html),u(i).attr("data-name","onecom_activate_theme"),t=1500),setTimeout(function(){u(".onecom-notifier").removeClass("show"),u(".loading-overlay.fullscreen-loader").removeClass("show")},t))})),oc_trigger_log({actionType:o,isPremium:t,theme:c.data("theme_slug"),referrer:h}),!0;"failed"===e.status?(jQuery("#oc_um_overlay").show(),ocSetModalData({isPremium:t,feature:"theme",theme:c.data("theme_slug"),featureAction:a,referrer:h}),u(".loading-overlay.fullscreen-loader").removeClass("show")):e.msg&&oc_alert(e.msg,"error",5e3)})}),u(document).on("click",".install-now, .activate-plugin-ajax",function(e){e.preventDefault();var a=u(this),o=u(this).parents(".one-plugin-card:first"),e=u(this).attr("data-download_url"),t=u(this).attr("data-slug"),n=u(this).attr("data-name"),i=u(this).attr("data-action"),r=u(this).attr("data-redirect"),s=void 0!==u(this).attr("data-plugin_type")?u(this).attr("data-plugin_type"):"",i=(u(".loading-overlay.fullscreen-loader").addClass("show"),{action:i,plugin_slug:t,plugin_name:n,download_url:e,plugin_type:s,redirect:r});u.post(ajaxurl,i,function(e){var t,e=u.parseJSON(e);console.log(e),void 0!==e.type&&"redirect"==e.type?window.location=e.url:(u(".onecom-notifier").html(e.message).attr("type",e.type).addClass("show"),t=5e3,"success"==e.type&&(u(o).addClass("activate"),u(a).after(e.button_html),u(a).remove(),t=1500),setTimeout(function(){u(".onecom-notifier").removeClass("show"),u(".loading-overlay.fullscreen-loader").removeClass("show")},t))})}),u(".pagination-item").click(function(e){e.preventDefault(),u(this).is(".current")||(u(".pagination-item").removeClass("current"),u(this).addClass("current"),n(e))});var t=u("#one-confirmation"),a=t.attr("data-yes_string"),o=t.attr("data-no_string");t.dialog({dialogClass:"wp-dialog wp-one-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,width:"25%",hide:{effect:"explode",duration:1e3},resizable:!1,buttons:[{text:o,class:"button",click:function(){u(this).dialog("close")}},{text:a,class:"button button-primary",click:function(){var e=u(this).data("element"),e=u(e).parents("form:first");u(e)[0].submit(),u(this).dialog("close")}}]}),u(".one-deactivate-plugin").click(function(e){e.preventDefault(),t.data("element",this).dialog("open")}),u(".discouraged-modal-close").click(function(){u("#one-confirmation").dialog("close")}),u(".one-theme").hover(function(){u(this).addClass("active")},function(){u(this).removeClass("active")}),u("#oc_theme_filter li").click(function(e){n(e)}),u("#oc_theme_filter li span").click(function(e){e.currentTarget.parentElement.click()})}),u(window).scroll(function(){onecom_move_up_toggle()}),u(window).load(function(){onecom_move_up_toggle()}),window.onpopstate=function(e){var a;void 0!==e&&null!=e.state?a=e.state.paged:void 0!==(a=t("paged"))&&""!=a&&null!=a||(a=1),u(".pagination-item").each(function(e,t){u(t).attr("data-request_page")==a&&u(t).trigger("click")})},this.screenshotPreview=function(){xOffset=10,yOffset=30,u(".one-screenshot").hover(function(e){this.t=this.title;var t=(this.title="")!=this.t?"<br/>"+this.t:"";u("body").append("<p id='one-screenshot'><img src='"+u(this).attr("data-preview")+"' alt='url preview' />"+t+"</p>"),u("#screenshot").css("top",e.pageY-xOffset+"px").css("left",e.pageX+yOffset+"px").fadeIn("fast")},function(){this.title=this.t,u("#one-screenshot").remove()}),u(".one-screenshot").mousemove(function(e){u("#one-screenshot").css("top",e.pageY-xOffset+"px").css("left",e.pageX+yOffset+"px")})},u(document).on("thickbox:iframe:loaded",function(e){u("#TB_iframeContent").contents().find("head").append(u("<style type='text/css'> .plugin-install-php #plugin-information-footer {display:none !important;} </style>"))}),u(document).on("click",".preview_link",function(){var e=u(this).parents(".one-theme:first"),t=u(".theme-browser > div.one-theme").length,a=u(this).attr("data-demo-url"),a=(u("iframe").attr("src",a),u(this).attr("data-id")),o=u(this).closest(".one-theme").next(".one-theme").find(".preview_link").attr("data-id"),o=(u(".header_btn_bar .next").attr("data-demo-id",o),u(this).closest(".one-theme").prev(".one-theme").find(".preview_link").attr("data-id")),o=(u(".header_btn_bar .previous").attr("data-demo-id",o),i(u(this).parents(".one-theme:first").attr("data-is-premium")),u(".header_btn_bar .theme-info").attr("data-theme-count",t),u(".header_btn_bar .theme-info").attr("data-active-demo-id",a),u(".header_btn_bar .preview-install-button").attr("data-active-demo-id",a),u(".header_btn_bar .next").removeAttr("style"),u(".header_btn_bar .previous").removeAttr("style"),u(this).attr("data-id")),o=(0===u("#demo-"+o).closest(".one-theme").prev(".one-theme").length&&(u(".header_btn_bar .previous").css({opacity:"0.5",cursor:"initial"}),u(".header_btn_bar .previous").attr("data-demo-id","0")),u(this).attr("data-id"));0===u("#demo-"+o).closest(".one-theme").next(".one-theme").length&&(u(".header_btn_bar .next").css({opacity:"0.5",cursor:"initial"}),u(".header_btn_bar .next").attr("data-demo-id","0")),u(e).hasClass("installed")?u(".header_btn_bar").find(".preview-install-button").hide():u(".header_btn_bar").find(".preview-install-button").show(),tb_show("Preview Popup","#TB_inline?width=full&height=full&inlineId=thickbox_preview&modal=true&class=thickbox",null),u("body").addClass("preview_page"),r(o,0,location.search)}),u(document).on("click",".close_btn",function(){tb_remove(),setTimeout(function(){u("body").removeClass("preview_page")},500)}),u(document).on("click",".one-dialog-close",function(){tb_remove()}),u(document).on("click",".preview-install-button",function(){var a=u(this).attr("data-active-demo-id"),o=null;u(".one-theme").each(function(e,t){if(u(t).find(".preview_link").attr("data-id")===a)return o=t,!1}),null!=o&&(u("html, body").stop().animate({scrollTop:u(o).offset().top-64},300),u(".close_btn").trigger("click"),u(o).find(".one-install").trigger("click"))}),u(document).on("click","#desktop",function(){u(".preview-container .phone-content").removeClass("phone-content").addClass("desktop-content"),u(".preview-container .preview span").remove(".screen-rotate"),u(".preview-container").removeClass("scroll"),u(".preview-container iframe").removeClass("horizontal"),u(".desktop-content").removeClass("horizontal"),u("#desktop").addClass("current"),u("#mobile").removeClass("current")}),u(document).on("click","#mobile",function(){u(".preview-container .desktop-content").removeClass("desktop-content").addClass("phone-content"),u(".preview-container").addClass("scroll"),u(".preview-container .preview").append('<span class="screen-rotate"></span>'),u("#desktop").removeClass("current"),u("#mobile").addClass("current")}),u(document).on("click",".screen-rotate",function(){u(".preview-container iframe").toggleClass("horizontal"),u(".phone-content").toggleClass("horizontal")}),u(document).on("click",".header_btn_bar .next",function(){var e,t,a=u(this).attr("data-demo-id"),o=u("#preview_box .theme-info").attr("data-active-demo-id"),n=u("#demo-"+a).closest(".one-theme").next(".one-theme").length;u(".header_btn_bar .preview-install-button").attr("data-active-demo-id",a),r(a,0,location.search),i(u('[data-index="'+a+'"]').attr("data-is-premium")),"0"===a?event.stopPropagation():(0===n?(u(this).css({opacity:"0.5",cursor:"initial"}),u(this).attr("data-demo-id",0),u(".header_btn_bar .previous").attr("data-demo-id",o),e=u("#demo-"+a).attr("data-demo-url"),t=u("#demo-"+a).parents(".one-theme:first"),u("iframe").attr("src",e)):(u(".header_btn_bar .previous").removeAttr("style"),e=u("#demo-"+a).attr("data-demo-url"),t=u("#demo-"+a).parents(".one-theme:first"),u("iframe").attr("src",e),n=u("#demo-"+a).closest(".one-theme").next(".one-theme").find(".preview_link").attr("data-id"),u(this).attr("data-demo-id",n),u(".header_btn_bar .previous").attr("data-demo-id",o)),u(".header_btn_bar .theme-info").attr("data-active-demo-id",a)),u(t).hasClass("installed")?u(".header_btn_bar").find(".preview-install-button").hide():u(".header_btn_bar").find(".preview-install-button").show()}),u(document).on("click",".header_btn_bar .previous",function(){var e,t,a=u(this).attr("data-demo-id"),o=u("#preview_box .theme-info").attr("data-active-demo-id"),n=u("#demo-"+a).closest(".one-theme").prev(".one-theme").length;u(".header_btn_bar .preview-install-button").attr("data-active-demo-id",a),r(a,0,location.search),i(u('[data-index="'+a+'"]').attr("data-is-premium")),"0"===a?event.stopPropagation():(0===n?(u(this).css({opacity:"0.5",cursor:"initial"}),u(this).attr("data-demo-id",0),u(".header_btn_bar .next").attr("data-demo-id",o),e=u("#demo-"+a).attr("data-demo-url"),t=u("#demo-"+a).parents(".one-theme:first"),u("iframe").attr("src",e)):(u(".header_btn_bar .next").removeAttr("style"),e=u("#demo-"+a).attr("data-demo-url"),t=u("#demo-"+a).parents(".one-theme:first"),u("iframe").attr("src",e),n=u("#demo-"+a).closest(".one-theme").prev(".one-theme").find(".preview_link").attr("data-id"),u(this).attr("data-demo-id",n),u(".header_btn_bar .next").attr("data-demo-id",o)),u(".header_btn_bar .theme-info").attr("data-active-demo-id",a)),u(t).hasClass("installed")?u(".header_btn_bar").find(".preview-install-button").hide():u(".header_btn_bar").find(".preview-install-button").show()}),this.onecom_move_up_toggle=function(){if(0==u(".onecom-move-up").length)return!1;u(window).height()/2<=u(window).scrollTop()?u(".onecom-move-up").addClass("show"):u(".onecom-move-up").removeClass("show")},u(".h-parent").length){const l=document.querySelector(".h-parent");let t=!1,a,o;l.addEventListener("mousedown",e=>{t=!0,l.classList.add("active"),a=e.pageX-l.offsetLeft,o=l.scrollLeft}),l.addEventListener("mouseleave",()=>{t=!1,l.classList.remove("active")}),l.addEventListener("mouseup",()=>{t=!1,l.classList.remove("active")}),l.addEventListener("mousemove",e=>{t&&(e.preventDefault(),e=3*(e.pageX-l.offsetLeft-a),l.scrollLeft=o-e)})}}(jQuery);