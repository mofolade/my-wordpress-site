!function(y,v,m){m.shinybox=function(e,s){var n,o={useCSS:!0,initialIndexOnArray:0,hideBarsDelay:3e3,videoMaxWidth:1140,vimeoColor:"CCCCCC",beforeOpen:null,afterClose:null,sort:null,closePlacement:"top",captionPlacement:"bottom",navigationPlacement:"bottom"},a=this,r=[],l=e.selector,h=m(l),i=void 0!==v.createTouch||"ontouchstart"in y||"onmsgesturechange"in y||navigator.msMaxTouchPoints,d=!!y.SVGSVGElement,c=(y.innerWidth||m(y).width(),y.innerHeight||m(y).height(),""),b="shinybox-overlay",u=(a.settings={},a.init=function(){a.settings=m.extend({},o,s);var i="",t="";a.settings.sort&&h.sort(a.settings.sort),"top"===a.settings.closePlacement?i+='<a class="shinybox-close"></a>':"bottom"===a.settings.closePlacement&&(t+='<a class="shinybox-close"></a>'),"top"===a.settings.captionPlacement?i+='<div class="shinybox-caption"></div>':"bottom"===a.settings.captionPlacement&&(t+='<div class="shinybox-caption"></div>'),"top"===a.settings.navigationPlacement?i+='<a class="shinybox-prev"></a><a class="shinybox-next"></a>':"bottom"===a.settings.navigationPlacement&&(t+='<a class="shinybox-prev"></a><a class="shinybox-next"></a>'),b=a.settings.id||b,c='<div id="'+b+'" class="shinybox-overlay"><div class="shinybox-slider"></div><div class="shinybox-top">'+i+'</div><div class="shinybox-bottom">'+t+"</div></div>",m.isArray(e)?(r=e,u.target=m(y),u.init(a.settings.initialIndexOnArray)):h.click(function(i){var t,e;r=[],e||(t="rel",e=m(this).attr(t)),(n=e&&""!==e&&"nofollow"!==e?h.filter("["+t+'="'+e+'"]'):m(l)).each(function(){var i=null,t=null;m(this).attr("title")&&(i=m(this).attr("title")),m(this).attr("href")&&(t=m(this).attr("href")),r.push({href:t,title:i})}),t=n.index(m(this)),i.preventDefault(),i.stopPropagation(),u.target=m(i.target),u.init(t)})},a.refresh=function(){m.isArray(e)||(u.destroy(),n=m(l),u.actions())},{init:function(i){a.settings.beforeOpen&&a.settings.beforeOpen(),this.target.trigger("shinybox-start"),m.shinybox.isOpen=!0,this.build(),this.openSlide(i),this.openMedia(i),this.preloadMedia(i+1),this.preloadMedia(i-1)},build:function(){var i,t=this;m("body").append(c),t.doCssTrans()&&(m(".shinybox-slider").css({"-webkit-transition":"left 0.4s ease","-moz-transition":"left 0.4s ease","-o-transition":"left 0.4s ease","-khtml-transition":"left 0.4s ease",transition:"left 0.4s ease"}),m(".shinybox-overlay").css({"-webkit-transition":"opacity 1s ease","-moz-transition":"opacity 1s ease","-o-transition":"opacity 1s ease","-khtml-transition":"opacity 1s ease",transition:"opacity 1s ease"}),m(".shinybox-bottom, .shinybox-top").css({"-webkit-transition":"0.5s","-moz-transition":"0.5s","-o-transition":"0.5s","-khtml-transition":"0.5s",transition:"0.5s"})),d&&(i=(i=m(".shinybox-close").css("background-image")).replace("png","svg"),m(".shinybox-prev,.shinybox-next,.shinybox-close").css({"background-image":i})),m.each(r,function(){m(".shinybox-slider").append('<div class="slide"></div>')}),t.setDim(),t.actions(),t.keyboard(),t.gesture(),t.animBars(),t.resize()},setDim:function(){var i,t,e,s;"onorientationchange"in y?((s=function(){i=y.innerWidth||m(y).width(),t=y.innerHeight||m(y).height()})(),y.addEventListener("orientationchange",function(){s()},!1)):(i=y.innerWidth||m(y).width(),t=y.innerHeight||m(y).height()),e={width:i,height:t},m(".shinybox-overlay").css(e),0===a.settings.hideBarsDelay?m(".shinybox-slider").css({top:"50px",height:t-100+"px"}):m(".shinybox-slider").css({top:0,height:"100%"})},resize:function(){var i=this;m(y).resize(function(){i.setDim()}).resize()},supportTransition:function(){for(var i="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" "),t=0;t<i.length;t+=1)if(void 0!==v.createElement("div").style[i[t]])return i[t];return!1},doCssTrans:function(){if(a.settings.useCSS&&this.supportTransition())return!0},gesture:function(){var t,e,s,n,o;i&&(t=this,e=null,s={},n={},(o=m(".shinybox-top, .shinybox-bottom")).addClass("visible-bars"),t.setTimeout(),m("body").bind("touchstart",function(i){return m(this).addClass("touching"),n=i.originalEvent.targetTouches[0],s.pageX=i.originalEvent.targetTouches[0].pageX,m(".touching").bind("touchmove",function(i){i.preventDefault(),i.stopPropagation(),n=i.originalEvent.targetTouches[0]}),!1}).bind("touchend",function(i){i.preventDefault(),i.stopPropagation(),10<=(e=n.pageX-s.pageX)?t.getPrev():e<=-10?t.getNext():o.hasClass("visible-bars")?(t.clearTimeout(),t.hideBars()):(t.showBars(),t.setTimeout()),m(".touching").off("touchmove").removeClass("touching")}))},setTimeout:function(){var i;0<a.settings.hideBarsDelay&&((i=this).clearTimeout(),i.timeout=y.setTimeout(function(){i.hideBars()},a.settings.hideBarsDelay))},clearTimeout:function(){y.clearTimeout(this.timeout),this.timeout=null},showBars:function(){var i=m(".shinybox-top, .shinybox-bottom");this.doCssTrans()?i.addClass("visible-bars"):(m(".shinybox-top").animate({top:0},500),m(".shinybox-bottom").animate({bottom:0},500),setTimeout(function(){i.addClass("visible-bars")},1e3))},hideBars:function(){var i=m(".shinybox-top, .shinybox-bottom");this.doCssTrans()?i.removeClass("visible-bars"):(m(".shinybox-top").animate({top:"-50px"},500),m(".shinybox-bottom").animate({bottom:"-50px"},500),setTimeout(function(){i.removeClass("visible-bars")},1e3))},animBars:function(){var t=this,e=m(".shinybox-top, .shinybox-bottom");e.addClass("visible-bars"),t.setTimeout(),m(".shinybox-slider").click(function(i){e.hasClass("visible-bars")||(t.showBars(),t.setTimeout())}),m(".shinybox-bottom").hover(function(){t.showBars(),e.addClass("force-visible-bars"),t.clearTimeout()},function(){e.removeClass("force-visible-bars"),t.setTimeout()})},keyboard:function(){var t=this;m(y).bind("keydown",function(i){37===i.keyCode||8===i.keyCode?(i.preventDefault(),i.stopPropagation(),t.getPrev()):39===i.keyCode?(i.preventDefault(),i.stopPropagation(),t.getNext()):27===i.keyCode&&(i.preventDefault(),i.stopPropagation(),t.closeSlide())})},actions:function(){var t=this;r.length<2?m(".shinybox-prev, .shinybox-next").hide():(m(".shinybox-prev").bind("click touchend",function(i){i.preventDefault(),i.stopPropagation(),t.getPrev(),t.setTimeout()}),m(".shinybox-next").bind("click touchend",function(i){i.preventDefault(),i.stopPropagation(),t.getNext(),t.setTimeout()})),m(".shinybox-close").bind("click touchend",function(i){t.closeSlide()}),m(".shinybox-slider .slide").bind("click",function(i){i.target===this&&t.closeSlide()})},setSlide:function(i,t){t=t||!1;var e=m(".shinybox-slider");this.doCssTrans()?e.css({left:100*-i+"%"}):e.animate({left:100*-i+"%"}),m(".shinybox-slider .slide").removeClass("current"),m(".shinybox-slider .slide").eq(i).addClass("current"),this.setTitle(i),t&&e.fadeIn(),m(".shinybox-prev, .shinybox-next").removeClass("disabled"),0===i?m(".shinybox-prev").addClass("disabled"):i===r.length-1&&m(".shinybox-next").addClass("disabled")},openSlide:function(i){m("html").addClass("shinybox"),m(y).trigger("resize"),this.setSlide(i,!0)},preloadMedia:function(i){var t=this,e=null;void 0!==r[i]&&(e=r[i].href),t.isVideo(e)?t.openMedia(i):setTimeout(function(){t.openMedia(i)},300)},openMedia:function(i){var t=this,e=null;if(void 0!==r[i]&&(e=r[i].href),i<0||i>=r.length)return!1;var s=m(".shinybox-slider .slide").eq(i);t.isVideo(e)?s.html(t.getVideo(e)):t.isPDF(e)?s.html(t.getPDF(e)):(s.html('<div class="loading"></div>'),t.loadMedia(e,function(){s.html(this)}))},setTitle:function(i,t){var e=null;m(".shinybox-caption").empty(),(e=void 0!==r[i]?r[i].title:e)&&m(".shinybox-caption").text(e)},isPDF:function(i){if(i&&i.match(/\.pdf(?:\?|$)/))return!0},getPDF:function(i){return'<div class="shinybox-pdf-container"><div class="shinybox-pdf">'+('<iframe src="'+i+'">')+"</div></div>"},isVideo:function(i){if(i&&(i.match(/youtube\.com\/watch\?v=([a-zA-Z0-9\-_]+)/)||i.match(/vimeo\.com\/([0-9]*)/)))return!0},getVideo:function(i){var t="",e=i.match(/watch\?v=([a-zA-Z0-9\-_]+)/),i=i.match(/vimeo\.com\/([0-9]*)/);return e?t='<iframe width="560" height="315" src="//www.youtube.com/embed/'+e[1]+'" frameborder="0" allowfullscreen></iframe>':i&&(t='<iframe width="560" height="315"  src="http://player.vimeo.com/video/'+i[1]+"?byline=0&amp;portrait=0&amp;color="+a.settings.vimeoColor+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'),'<div class="shinybox-video-container" style="max-width:'+a.settings.videomaxWidth+'px"><div class="shinybox-video">'+t+"</div></div>"},loadMedia:function(i,t){var e;this.isVideo(i)||(e=m("<img>").on("load",function(){t.call(e)})).attr("src",i)},getNext:function(){var i=m(".shinybox-slider .slide").index(m(".shinybox-slider .slide.current"));i+1<r.length?(this.setSlide(i+=1),this.preloadMedia(i+1)):(m(".shinybox-slider").addClass("rightSpring"),setTimeout(function(){m(".shinybox-slider").removeClass("rightSpring")},500))},getPrev:function(){var i=m(".shinybox-slider .slide").index(m(".shinybox-slider .slide.current"));0<i?(this.setSlide(--i),this.preloadMedia(i-1)):(m(".shinybox-slider").addClass("leftSpring"),setTimeout(function(){m(".shinybox-slider").removeClass("leftSpring")},500))},closeSlide:function(){m("html").removeClass("shinybox"),m(y).trigger("resize"),this.destroy()},destroy:function(){m(y).unbind("keydown"),m("body").unbind("touchstart"),m("body").unbind("touchmove"),m("body").unbind("touchend"),m(".shinybox-slider").unbind(),m(".shinybox-overlay").remove(),m.isArray(e)||e.removeData("_shinybox"),this.target&&this.target.trigger("shinybox-destroy"),m.shinybox.isOpen=!1,a.settings.afterClose&&a.settings.afterClose()}});a.init()},m.fn.shinybox=function(i){return m.data(this,"_shinybox")||(i=new m.shinybox(this,i),this.data("_shinybox",i)),this.data("_shinybox")}}(window,document,jQuery);